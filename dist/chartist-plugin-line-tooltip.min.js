/* chartist-plugin-line-tooltip 0.0.1
 * Copyright Â© 2015 Ivan Zubenko
 * Free to use under the WTFPL license.
 * http://www.wtfpl.net/
 */

!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.returnExportsGlobal=b()}):"object"==typeof exports?module.exports=b():a["Chartist.plugins.lineTooltip"]=b()}(this,function(){return function(a,b,c){"use strict";var d={formatHeader:c.noop,formatValue:c.noop,cursor:{hiddenPosition:c.noop,header:c.noop},classNames:{tooltip:"tooltip",cursor:"cursor"}},e=function(a,b,d,e){var f=$("."+e.classNames.tooltip,a.container);f.length||(f=$('<div class="'+e.classNames.tooltip+'"></div>').appendTo(a.container)),f.hide();var g=function(a,b){var d='<div class="header">'+(a||"")+"</div>";return b.reduce(function(a,b,d){return a+'<div class="series series-'+c.alphaNumerate(d)+'"><svg class="series-label"><line x1="0" x2="100%" y1="50%" y2="50%" class="label-line"></line></svg><div class="value">'+b+"</div></div>"},d)},h=function(a){return{left:a,top:b.height()/2-f.outerHeight()/2}};this.hide=function(){f.hide()},this.show=function(a,b,c){f.html(g(b,c)).css(h(d[a])).show()}},f=function(a,b,c,d){var e=a.svg.elem("line",{},d.classNames.cursor),f=$("."+d.classNames.cursor+"-header",a.container);f.length||(f=$('<span class="'+d.classNames.cursor+'-header" style="position: absolute"></span>').appendTo(a.container)),f.hide();var g=function(a){f.html(d.cursor.header()||"").css({top:0,left:a-f.width()/2}).show()};this.hide=function(){e.attr({style:"display: none"}),f.hide()},this.show=function(a){var d=c[a];g(d),e.attr({x1:d,x2:d,y1:b.y1,y2:b.y2+f.height(),style:""})}},g=function(a){var b=-1,c=function(b,d,e,f){if(void 0===d&&(d=0),void 0===e&&(e=a.length-1),d>e)return f;var g=Math.floor((d+e)/2),h=Math.abs(b-a[g]);return 0===h?g:((void 0===f||h<Math.abs(b-a[f]))&&(f=g),b<a[g]?c(b,d,g-1,f):c(b,g+1,e,f))};this.get=function(){return b},this.reset=function(){b=-1},this.set=function(a){var d=c(a);return b===d?!1:(b=d,!0)}};c.plugins=c.plugins||{},c.plugins.lineTooltip=function(a){return a=c.extend({},d,a),function(b){if(b instanceof c.Line){var d,h,i,j,k,l;b.on("data",function(a){h=a.data.labels,i=new Array(h.length),d=new Array(a.data.series.length)}),b.on("draw",function(a){"line"===a.type&&(d[a.index]=a.values),"point"===a.type&&(i[a.index]=a.x)}),b.on("created",function(c){l=new g(i),j=new e(b,c.chartRect,i,a),k=new f(b,c.chartRect,i,a)}),$(b.container).on("mouseleave",function(){l.reset(),j.hide(),k.hide()}),$(b.container).on("mousemove","."+b.options.classNames.chart,function(b){if("svg"===b.target.tagName.toLowerCase()){var c=b.offsetX||b.originalEvent.layerX;if(l.set(c)){var e=l.get();a.cursor.hiddenPosition()===h[e]?k.hide():k.show(e);var f=d.map(function(b,c){return a.formatValue(b[e],c)});j.show(e,a.formatHeader(h[e],e),f)}}})}}}}(window,document,Chartist),Chartist.plugins.lineTooltip});
//# sourceMappingURL=chartist-plugin-line-tooltip.min.js.map