/* chartist-plugin-line-tooltip 0.0.1
 * Copyright Â© 2015 Ivan Zubenko
 * Free to use under the WTFPL license.
 * http://www.wtfpl.net/
 */

!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.returnExportsGlobal=b()}):"object"==typeof exports?module.exports=b():a["Chartist.plugins.lineTooltip"]=b()}(this,function(){return function(a,b,c){"use strict";var d={formatHeader:c.noop,formatValue:c.noop,cursorLabel:void 0,classNames:{tooltip:"tooltip",series:"series",cursor:"cursor"}},e=function(a,b,d,e,f,g){var h=$("."+e.classNames.tooltip,a.container);h.length||(h=$('<div class="'+e.classNames.tooltip+'"></div>').appendTo(a.container)),h.hide();var i=function(b){return a.data.series[b].groupName||c.alphaNumerate(b)},j=function(b){return a.data.series[b].className||e.classNames.series+"-"+c.alphaNumerate(b)},k=function(a){var b={};return g.map(function(b,c){return{groupName:i(c),className:j(c),text:e.formatValue(b[a],c)}}).filter(function(a){return void 0!==a.text&&null!==a.text&&""!==a.text}).reduce(function(a,c){var d=b[c.groupName]||(b[c.groupName]=[]);return-1===d.indexOf(c.text)&&(d.push(c.text),a.push(c)),a},[])},l={},m=function(a){var b=e.formatHeader(f[a],a),c=k(a),d='<div class="'+e.classNames.tooltip+'-header">'+(b||"")+"</div>";return c.reduce(function(a,b){return a+'<div class="'+e.classNames.series+" "+b.className+'"><svg class="'+e.classNames.series+'-label"><line x1="0" x2="100%" y1="50%" y2="50%" class="label-line"></line></svg><div class="value">'+b.text+"</div></div>"},d)},n=function(a){return{left:d[a],top:b.height()/2-h.outerHeight()/2}},o=function(a){return l[a]||(l[a]={html:m(a),offset:n(a)})};this.show=function(a){var b=o(a);h.html(b.html).css(b.offset).show()},this.hide=function(){h.hide()}},f=function(a,b,c,d){var e=a.svg.elem("line",{},d.classNames.cursor),f=$("."+d.classNames.cursor+"-label",a.container);f.length||(f=$('<span class="'+d.classNames.cursor+'-label" style="position: absolute"></span>').html(d.cursorLabel||"").appendTo(a.container)),f.hide().css("top",a.options.chartPadding.top-f.outerHeight());var g=f.width()/2,h=function(a){f.css("left",a-g).show()};this.hide=function(){e.attr({style:"display: none"}),f.hide()},this.show=function(a){var d=c[a];h(d),e.attr({x1:d,x2:d,y1:b.y1,y2:b.y2,style:""})}},g=function(a){var b=-1,c=function(b,d,e,f){if(void 0===d&&(d=0),void 0===e&&(e=a.length-1),d>e)return f;var g=Math.floor((d+e)/2),h=Math.abs(b-a[g]);return 0===h?g:((void 0===f||h<Math.abs(b-a[f]))&&(f=g),b<a[g]?c(b,d,g-1,f):c(b,g+1,e,f))};this.get=function(){return b},this.reset=function(){b=-1},this.set=function(a){var d=c(a);return b===d?!1:(b=d,!0)}};c.plugins=c.plugins||{},c.plugins.lineTooltip=function(a){return a=c.extend({},d,a),function(b){if(b instanceof c.Line){var d,h,i,j,k,l;b.on("data",function(a){h=a.data.labels,i=new Array(h.length),d=new Array(a.data.series.length)}),b.on("draw",function(a){"line"===a.type&&(d[a.index]=a.values),"point"===a.type&&(i[a.index]=a.x)}),b.on("created",function(c){l=new g(i),j=new e(b,c.chartRect,i,a,h,d),k=new f(b,c.chartRect,i,a)}),$(b.container).on("mouseleave",function(){l.reset(),j.hide(),k.hide()}),$(b.container).on("mousemove","."+b.options.classNames.chart,function(a){if("svg"===a.target.tagName.toLowerCase()){var b=a.offsetX||a.originalEvent.layerX;if(l.set(b)){var c=l.get();k.show(c),j.show(c)}}})}}}}(window,document,Chartist),Chartist.plugins.lineTooltip});
//# sourceMappingURL=chartist-plugin-line-tooltip.min.js.map